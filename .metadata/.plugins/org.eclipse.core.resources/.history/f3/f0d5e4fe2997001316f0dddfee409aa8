import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import org.jdom2.Document;
import org.jdom2.JDOMException;
import org.jdom2.output.XMLOutputter;


public class CloudHandler {
	
	private static CloudHandler cloud = new CloudHandler();
	private static String baseURL = "http://services.brics.dk/java4/cloud";

	//Starts a connection
		public static HttpURLConnection connect(String addedURL)
		{
			try
			{
				URL url = new URL(baseURL + addedURL);
				HttpURLConnection con = (HttpURLConnection) url.openConnection();

				con.setDoOutput(true);
				con.setRequestMethod("POST");
				con.connect();

				return con;
			} catch (MalformedURLException murle)
			{
				return null;
			} catch (IOException ioe)
			{
				return null;
			}

		}
		
		//Sends a Document and returns the response
		public static Document getResponse(HttpURLConnection con, Document d, XMLOutputter out)
		{
			try
			{
				out.output(d, con.getOutputStream());

				int responseCode = con.getResponseCode();
				InputStream response = con.getInputStream();

				Document itemID = b.build(response);
				return itemID;
			} catch(IOException ioe)
			{
				return null;
			} catch(JDOMException jdome)
			{
				return null;
			}

		}

	
}

